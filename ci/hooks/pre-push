#!/bin/sh

echo "[CI/CD] ðŸ”„ Building image..."

# Use a temporary image name.
IMAGE_TAG=inventory-cicd

if ! docker build -t $IMAGE_TAG .; then
  echo "[CI/CD] âŒ Build failed"
  exit 1
fi

echo "[CI/CD] âœ… Build successful"

echo "[CI/CD] ðŸ”„ Deleting image..."

docker rmi $IMAGE_TAG > /dev/null 2>&1

echo "[CI/CD] âœ… Deleted image"

echo "[CI/CD] ðŸ”„ Pushing branch..."

# Make sure the git hook gets a 0 return.
exit 0
